# Multithreaded-Network-Server

### Server

This program implements a multithreaded TCP server for managing a simple voting system. It uses a fixed-capacity buffer as a queue to temporarily store client connections, following a first-in, first-out (FIFO) structure. The master thread adds connections to the rear, while worker threads retrieve them from the front. Synchronization is achieved using with mutexes for locking shared resources and condition variables for signaling when the buffer is full or empty. When a SIGINT signal is received, the server writes sorted voting statistics to a file and terminates safely.

## Batch Client

This multi-threaded client program reads votes from an input file and sends them to a server via independent threads. Each thread establishes a TCP connection, sends the voter's details, and receives confirmation. The ThreadData structure stores relevant information, and threads operate independently, ensuring efficient processing and proper memory deallocation. The program exits after handling all votes.

### Bash Scripts

/* ===== create_input.sh ===== */ <br>


This bash script generates an inputFile.txt containing randomly generated first names, last names, and party affiliations. It takes two arguments: a file with party names and the number of lines to generate. The script validates the input, ensuring the correct number of arguments, the existence and readability of the parties file, a positive integer for the number of lines, and a non-empty parties file. The names generated are random strings between 3 and 12 characters, and parties are randomly selected from the file. A confirmation message is displayed when the file is created successfully.

/* ====== tallyVotes.sh ====== */ <br>

This bash script processes an input file to count votes for each party. It validates the file's existence and readability, sorts its contents, removes duplicates, and ensures each individualâ€™s vote is counted only once. The results are written to a specified output file, with party names listed alphabetically alongside their vote counts. A confirmation message indicates successful completion.

/* ==== processLogFile.sh ==== */
This bash script checks if the file generated by running the poller.c (server) exists and has appropriate permissions. 
It proceeds to sort the file, remove duplicate lines, and count the votes for each party. The script also ensures that only the first vote from 
each individual is counted, disregarding any subsequent votes from the same person. It then creates a file named pollerResultsFile, 
where the results are stored in alphabetical order based on the party's name. Finally, it prints a message indicating that the results have been written to the file.

Usage:
1. Change permissions: `chmod +x name_of_bash.sh`
   - Where `name_of_bash` is the name of the bash script you want to execute.

2. Run the script:
- `./create_input.sh path_to_parties_file numLines`
        - `path_to_parties_file` is the path to the file containing party names.
        - `numLines` is the number of voters (lines) you want to generate.
- `./tallyVotes.sh output_file`
        - `output_file` is the name of the file where the voting results will be written.
- `./processLogFile.sh output_file`
        - `output_file` is the name of the file where the processed log results will be written.

## Usage

Use the Makefile to compile, run and clean using the following commands:

```bash
$ make            # Compile the 'poller' and 'pollSwayer' executables.
$ make run_poller # Execute the 'poller' program with predefined arguments.
$ make run_swayer # Execute the 'pollSwayer' program with predefined arguments.
$ make clean      # Remove object files, executables, and additional files from the directory.
```
! Note: If you want to run the two programs manually, make sure that the first argument of 
        `pollSwayer` is the machine that the 'poller' server is running on.
